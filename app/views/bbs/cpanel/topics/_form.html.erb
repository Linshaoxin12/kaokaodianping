<%= form_for(@topic,:url=>(@topic.new_record? ? bbs_cpanel_topics_path : bbs_cpanel_topic_path(@topic) )) do |f| %>
<fieldset>
  <legend></legend>
  <%= render 'shared/error_messages', :target => @topic %>

  <div class="clearfix">
    <%= f.label :title %>
    <div class="input">
    <%= f.text_field :title, :class => "span10" %>
    </div>
  </div>
  <div class="clearfix">
    <%= f.label :node_id %>
    <div class="input">
    <%= f.select :node_id, LandNode.all.collect { |n| [n.name,n.id] } %>
    </div>
  </div>
  <div class="clearfix">
    <%= f.label :body %>
    <div class="input">
    <%= f.text_area :body, :class => "span13", :style => "height:400px" %>
    </div>
  </div>
  <div class="clearfix">
    <%= f.label :user_id %>
    <div class="input">
    <%= f.text_field :user_id %> <%= @topic.user.name if @topic.user %>
    </div>
  </div>
  <div class="clearfix">
    <%= f.label :last_reply_user_id %>
    <div class="input">
    <%= f.text_field :last_reply_user_id %>
    </div>
  </div>
  <div class="clearfix">
    <%= f.label :source %>
    <div class="input">
    <%= f.text_field :source %>
    </div>
  </div>
  <div class="actions">
    <button class="btn primary">保存</button> or 
    <%= link_to 'Back', bbs_cpanel_topics_path %>
  </div>
<% end %>
